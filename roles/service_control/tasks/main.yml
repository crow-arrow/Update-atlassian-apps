---
# - name: Set service name depending on environment
#   set_fact:
#     SERVICE_NAME: "{{ lookup('vars', env | upper + '_SERVICE_NAME') }}"

- name: Stop service
  shell: "sudo systemctl stop {{ SERVICE_NAME }}"
  when:
    - service_action == "stop"
    - app == "jira"
  register: stop_result
  ignore_errors: false
  become: false
  tags: [service_control]

- name: Start service
  shell: "sudo systemctl start {{ SERVICE_NAME }}"
  when:
    - service_action == "start"
    - app == "jira"
  register: start_result
  ignore_errors: false
  become: false
  tags: [service_control]
